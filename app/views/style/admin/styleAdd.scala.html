@(styleAddForm: Form[Style], stylePara : models.StylePara, stylists: List[models.Stylist], isStylist: Boolean)

@import helper._

<link rel="stylesheet" media="screen" href="@routes.Assets.at("stylesheets/user/user.css")">
<script src="@routes.Assets.at("javascripts/jquery-1.7.1.min.js")" type="text/javascript"></script>
<head>
	<div>
		<h2>@Messages("hair.styleAdd")</h2>
	</div>
</head>
@if(isStylist){
    <body>
        <div>
        @form(auth.routes.Stylists.newStyleAddByStylist, 'id -> "styleAddForm"){
            <div>
                @Messages("hair.styleName")<input type = "text" class="" name = "styleName" value = "">
            </div>
            <div>
            <fieldset>
                <legend>@Messages("user.optContactMethod")</legend>
                <div id="optContactMethods">
                    @repeat(styleAddForm("stylePic")) { stylePicOne =>
                        @stylePicOneGroup(stylePicOne)
                    }
                    @**
                     * Keep an hidden block that will be used as template for Javascript copy code
                     **@
                    @stylePicOneGroup(
                        styleAddForm("stylePic[x]"),
                        className = "optContactMethod_template"
                    )
                    <div class="manage">
                        <a class="addOptContactMethod btn success">Add another stylePic</a>
                    </div>
                </div>
            </fieldset>
            </div>
            <div>
                <input type = "hidden" class="" name = "stylistId" field = styleAddForm("stylistId") value = "@stylists(0).stylistId"> 
            </div>
            <div align="left">  
            @input(field = styleAddForm("styleLength"),args = '_label ->Messages("hair.styleLength")){(id,name,value,args) =>
                @for(i <- 0 to stylePara.styleLength.length-1){
                      <input type = "radio" class="" name = "styleLength", value = "@stylePara.styleLength(i)">@stylePara.styleLength(i)
                }
            }
            @input(field = styleAddForm("styleImpression"),args = '_label ->Messages("hair.impression")){(id,name,value,args) =>
                @for(i <- 0 to stylePara.styleImpression.length-1){
                      <input type = "radio" class="" name = "styleImpression", value = "@stylePara.styleImpression(i)">@stylePara.styleImpression(i)
                }
            }
            @input(field = styleAddForm("styleColor"),args = '_label ->Messages("hair.color")){(id,name,value,args) =>
                @for(i <- 0 to stylePara.styleColor.length-1){
                      <input type = "checkbox" class="" name = "styleColor[@i]", value = "@stylePara.styleColor(i)">@stylePara.styleColor(i)
                }
            }
            @input(field = styleAddForm("serviceType"),args = '_label ->Messages("hair.serviceType")){(id,name,value,args) =>
                @for(i <- 0 to stylePara.serviceType.length-1){
                      <input type = "checkbox" class="" name = "serviceType[@i]", value = "@stylePara.serviceType(i)">@stylePara.serviceType(i)
                }
            }
            @input(field = styleAddForm("styleAmount"),args = '_label ->Messages("hair.styleAmount")){(id,name,value,args) =>
                @for(i <- 0 to stylePara.styleAmount.length-1){
                      <input type = "checkbox" class="" name = "styleAmount[@i]", value = "@stylePara.styleAmount(i)">@stylePara.styleAmount(i)
                }
            }
            @input(field = styleAddForm("styleQuality"),args = '_label ->Messages("hair.styleQuality")){(id,name,value,args) =>
                @for(i <- 0 to stylePara.styleQuality.length-1){
                      <input type = "checkbox" class="" name = "styleQuality[@i]", value = "@stylePara.styleQuality(i)">@stylePara.styleQuality(i)
                }
            }
            @input(field = styleAddForm("styleDiameter"),args = '_label ->Messages("hair.styleDiameter")){(id,name,value,args) =>
                @for(i <- 0 to stylePara.styleDiameter.length-1){
                      <input type = "checkbox" class="" name = "styleDiameter[@i]", value = "@stylePara.styleDiameter(i)">@stylePara.styleDiameter(i)
                }
            }
            @input(field = styleAddForm("faceShape"),args = '_label ->Messages("hair.faceShape")){(id,name,value,args) =>
                @for(i <- 0 to stylePara.faceShape.length-1){
                      <input type = "checkbox" class="" name = "faceShape[@i]" value = "@stylePara.faceShape(i)">@stylePara.faceShape(i)
                }
            }
            @input(field = styleAddForm("consumerSocialStatus"),args = '_label ->Messages("hair.consumerSocialStatus")){(id,name,value,args) =>
                @for(i <- 0 to stylePara.consumerSocialStatus.length-1){
                      <input type = "checkbox" class="" name = "consumerSocialStatus[@i]" value = "@stylePara.consumerSocialStatus(i)">@stylePara.consumerSocialStatus(i)
                }
            }
            @input(field = styleAddForm("consumerSex"),args = '_label ->Messages("hair.consumerSex")){(id,name,value,args) =>
                @for(i <- 0 to stylePara.consumerSex.length-1){
                      <input type = "radio" class="" name = "consumerSex" value = "@stylePara.consumerSex(i)">@stylePara.consumerSex(i)
                }
            }
            @input(field = styleAddForm("consumerAgeGroup"),args = '_label ->Messages("hair.consumerAgeGroup")){(id,name,value,args) =>
                @for(i <- 0 to stylePara.consumerAgeGroup.length-1){
                      <input type = "checkbox" class="" name = "consumerAgeGroup[@i]" value = "@stylePara.consumerAgeGroup(i)">@stylePara.consumerAgeGroup(i)
                }
            }
            </div>
            <div>
                @Messages("hair.assessFromStylist")<input type = "text" class="" name = "description" value = "">
            </div>
            
            <input type="file" id="filePhoto" name="photo" style="width:50"  /> 
            <div align="center">
                <input type = "reset" class = "buttons" value=@Messages("common.reset")>
                <input type="submit" class = "buttons" value=@Messages("common.submit")>
            </div>
         }
        </div>
    </body> 
}else{
    <body>
    	<div>
    	@form(routes.SalonsAdmin.newStyleAddBySalon, 'id -> "styleAddForm"){
    		<div>
    			@Messages("hair.styleName")<input type = "text" class="" name = "styleName" value = "">
    		</div>
    		<div>
            <fieldset>
                <legend>@Messages("user.optContactMethod")</legend>
                <div id="optContactMethods">
                    @repeat(styleAddForm("stylePic")) { stylePicOne =>
                        @stylePicOneGroup(stylePicOne)
                    }
                    @**
                     * Keep an hidden block that will be used as template for Javascript copy code
                     **@
                    @stylePicOneGroup(
                        styleAddForm("stylePic[x]"),
                        className = "optContactMethod_template"
                    )
                    <div class="manage">
                        <a class="addOptContactMethod btn success">Add another stylePic</a>
                    </div>
                </div>
            </fieldset>
    		</div>
    		<div>
    			@Messages("hair.stylist")
                <select id="stylistId">
                @for(i <- 0 to stylists.length-1) {
                    <option value="@stylists(i).stylistId.">@Stylist.findUser(stylists(i).stylistId).nickName</option>
                }
             </select>	
    		</div>
    		<div align="left">	
    		@input(field = styleAddForm("styleLength"),args = '_label ->Messages("hair.styleLength")){(id,name,value,args) =>
                @for(i <- 0 to stylePara.styleLength.length-1){
                      <input type = "radio" class="" name = "styleLength", value = "@stylePara.styleLength(i)">@stylePara.styleLength(i)
                }
            }
            @input(field = styleAddForm("styleImpression"),args = '_label ->Messages("hair.impression")){(id,name,value,args) =>
                @for(i <- 0 to stylePara.styleImpression.length-1){
                      <input type = "radio" class="" name = "styleImpression", value = "@stylePara.styleImpression(i)">@stylePara.styleImpression(i)
                }
            }
            @input(field = styleAddForm("styleColor"),args = '_label ->Messages("hair.color")){(id,name,value,args) =>
                @for(i <- 0 to stylePara.styleColor.length-1){
                      <input type = "checkbox" class="" name = "styleColor[@i]", value = "@stylePara.styleColor(i)">@stylePara.styleColor(i)
                }
            }
            @input(field = styleAddForm("serviceType"),args = '_label ->Messages("hair.serviceType")){(id,name,value,args) =>
                @for(i <- 0 to stylePara.serviceType.length-1){
                      <input type = "checkbox" class="" name = "serviceType[@i]", value = "@stylePara.serviceType(i)">@stylePara.serviceType(i)
                }
            }
            @input(field = styleAddForm("styleAmount"),args = '_label ->Messages("hair.styleAmount")){(id,name,value,args) =>
                @for(i <- 0 to stylePara.styleAmount.length-1){
                      <input type = "checkbox" class="" name = "styleAmount[@i]", value = "@stylePara.styleAmount(i)">@stylePara.styleAmount(i)
                }
            }
            @input(field = styleAddForm("styleQuality"),args = '_label ->Messages("hair.styleQuality")){(id,name,value,args) =>
                @for(i <- 0 to stylePara.styleQuality.length-1){
                      <input type = "checkbox" class="" name = "styleQuality[@i]", value = "@stylePara.styleQuality(i)">@stylePara.styleQuality(i)
                }
            }
            @input(field = styleAddForm("styleDiameter"),args = '_label ->Messages("hair.styleDiameter")){(id,name,value,args) =>
                @for(i <- 0 to stylePara.styleDiameter.length-1){
                      <input type = "checkbox" class="" name = "styleDiameter[@i]", value = "@stylePara.styleDiameter(i)">@stylePara.styleDiameter(i)
                }
            }
            @input(field = styleAddForm("faceShape"),args = '_label ->Messages("hair.faceShape")){(id,name,value,args) =>
                @for(i <- 0 to stylePara.faceShape.length-1){
                      <input type = "checkbox" class="" name = "faceShape[@i]" value = "@stylePara.faceShape(i)">@stylePara.faceShape(i)
                }
            }
            @input(field = styleAddForm("consumerSocialStatus"),args = '_label ->Messages("hair.consumerSocialStatus")){(id,name,value,args) =>
                @for(i <- 0 to stylePara.consumerSocialStatus.length-1){
                      <input type = "checkbox" class="" name = "consumerSocialStatus[@i]" value = "@stylePara.consumerSocialStatus(i)">@stylePara.consumerSocialStatus(i)
                }
            }
            @input(field = styleAddForm("consumerSex"),args = '_label ->Messages("hair.consumerSex")){(id,name,value,args) =>
                @for(i <- 0 to stylePara.consumerSex.length-1){
                      <input type = "radio" class="" name = "consumerSex" value = "@stylePara.consumerSex(i)">@stylePara.consumerSex(i)
                }
            }
            @input(field = styleAddForm("consumerAgeGroup"),args = '_label ->Messages("hair.consumerAgeGroup")){(id,name,value,args) =>
                @for(i <- 0 to stylePara.consumerAgeGroup.length-1){
                      <input type = "checkbox" class="" name = "consumerAgeGroup[@i]" value = "@stylePara.consumerAgeGroup(i)">@stylePara.consumerAgeGroup(i)
                }
            }
    	    </div>
    		<div>
    			@Messages("hair.assessFromStylist")<input type = "text" class="" name = "description" value = "">
    	    </div>
    	    
    	    <input type="file" id="filePhoto" name="photo" style="width:50"  /> 
            <div id="target" style="aligin:center;width:156px;height:205px;">
            	
            </div>
    	    <div align="center">
    	        <input type = "reset" class = "buttons" value=@Messages("common.reset")>
    		    <input type="submit" class = "buttons" value=@Messages("common.submit")>
            </div>
         }
         
    	</div>
    </body> 

}
@stylePicOneGroup(field: Field, className: String = "optContactMethod") = {
    <div class="twipsies well @className">
        <a class="removeOptContactMethod btn danger pull-right">Remove this stylePic</a>
        @inputText(
            field("fileObjId"), 
            '_label -> "fileObjId"
        )
        @inputText(
            field("picUse"), 
            '_label -> "picUse"
        )
        @inputText(
            field("showPriority"), 
            '_label -> "showPriority"
        )
        @inputText(
            field("description"), 
            '_label -> "description"
        )
        
    </div>
    }
    <script type="text/javascript" charset="utf-8">
        
        $('.removeOptContactMethod').live('click', function(e) {
            $(this).parents('.optContactMethod').remove()
            renumber()
        })
        
        $('.addOptContactMethod').live('click', function(e) {
            var template = $('.optContactMethod_template')
            template.before('<div class="twipsies well optContactMethod">' + template.html() + '</div>')
            renumber()
        })
       
        var renumber = function(accounts) {
            $('.optContactMethod').each(function(i) {
                $('input', this).each(function() {
                    $(this).attr('name', $(this).attr('name').replace(/stylePic\[.+?\]/g, 'stylePic[' + i + ']'))
                })
            })
        }
        
    </script>
    <script src="@routes.Assets.at("javascripts/jquery-1.9.0.min.js")" type="text/javascript"></script>
    <script type="text/javascript">
    function readURL(input) {
        if (input.files && input.files[0]) {
            var reader = new FileReader();
            reader.onload = function(e) {
                $('#target').append('<img src='+e.target.result+' style="float:left;width:150px;margin-left:30px;margin-top:40px;"'+'>');
                $('#pcis').append('<input type="file" id="filePhoto" name="photo" value="add file"/> ')
            }
            reader.readAsDataURL(input.files[0]);
        }
    }
    
    $("#filePhoto").click(function() {
        readURL(this);
    });
    </script>
