@(salon: Salon, couponForm: Form[Coupon], services: List[Service], coupon: Coupon)

@import helper._

<div>
	<ul class="tabInfoTitle">
		<li class="fl selected">
			@Messages("coupon.updateCouponArea")
		</li>		
	</ul>
</div>
<div class = "mT40">
	@form(auth.routes.Coupons.updateCoupon(coupon.id), 'id -> "couponForm",'name ->"couponForm") {
		<input type="hidden" name="salonId" value="@salon.id" />
		@if(couponForm.hasGlobalErrors) { 
	          <div>
	              <p>@couponForm.globalError.get.message<p>
	          </div>
	     }
	     
	     <table cellspacing="0" class="wFull bdCell pCell10 bgThNml mT10">
		    <tbody>
		        <tr>
		            <th>
		                <!-- -->
		                <div class="dibBL vaM w154">
		                	<font class="cR">*</font>
		                   	@Messages("coupon.couponName")
		                </div>
		            </th>
		            <td>
		                <div class="inputField">
		                	@inputText(couponForm("couponName"),
	                            'id -> "couponName",
	                            '_label -> None,
	                            'readonly ->true,
	                            '_help -> Messages(""))
		                </div>
		            </td>
		        </tr>
		        <tr>
		            <th>
		                <!-- -->
		                <div class="dibBL vaM w154">
		                	<font class="cR">*</font>
		                   	@Messages("coupon.serviceArea")
		                </div>
		            </th>
		            <td>
		                <div class="inputField">
		                	@input(field = couponForm("serviceItems"), args = '_label ->None, 
							'_error -> couponForm("serviceItems").error.map(_.withMessage(Messages("coupon.couponServiceRequired")))){(id,name,value,args) =>
							 	@for(service <- services) {
							 		<div class="serviceItemArea">
								 		@if(Service.getServiceIdList(coupon.serviceItems).contains(service.id)) {
								 			<input type = "checkbox" class="serviceItem" name = "serviceItems[@services.indexOf(service)].id", value = "@service.id" checked="checked">@service.serviceName
								 		} else {
								 			<input type = "checkbox" class="serviceItem" name = "serviceItems[@services.indexOf(service)].id", value = "@service.id">@service.serviceName
								 		}
							 		</div>
							 	}
	                            <dd class="info"></dd>
							}
		                </div>
		            </td>
		        </tr>
		        <tr>
		            <th>
		                <!-- -->
		                <div class="dibBL vaM w154">
		                	<font class="cR">*</font>
		                   	@Messages("coupon.perferentialPrice")
		                </div>
		            </th>
		            <td>
		                <div class="inputField">
		                	@inputText(couponForm("perferentialPrice"),'_label -> None, '_help -> Messages(""), 'id -> "price",
				 			'_error -> couponForm("perferentialPrice").error.map(_.withMessage(Messages("coupon.perferentialPriceErr"))))
		                </div>
		            </td>
		        </tr>
		        <tr>
		            <th>
		                <!-- -->
		                <div class="dibBL vaM w154">
		                	<font class="cR">*</font>
		                   	@Messages("coupon.startDate")
		                </div>
		            </th>
		            <td>
		                <div class="inputField">
		                	@input(field = couponForm("startDate"), '_label -> None, '_help -> Messages(""), 
							'_error -> couponForm("startDate").error.map(_.withMessage(Messages("coupon.startDateRequired")))){(id, name, value, _) =>
								<input class="Wdate" id = "startDate" type="text" name="@name" value="@value" onClick="WdatePicker() " onblur="checkedStartAndEndDate() ">
							}
		                </div>
		            </td>
		        </tr>
		        <tr>
		            <th>
		                <!-- -->
		                <div class="dibBL vaM w154">
		                	<font class="cR">*</font>
		                   	@Messages("coupon.endDate")
		                </div>
		            </th>
		            <td>
		                <div class="inputField">
		                	@input(field = couponForm("endDate"), '_label -> None, '_help -> Messages("coupon.endDateGtstart"), 
							'_error -> couponForm("startDate").error.map(_.withMessage(Messages("coupon.endDateRequired")))){(id, name, value, _) =>
								<input class="Wdate" id = "endDate" type="text" name="@name" value="@value" onClick="WdatePicker() " onblur="checkedStartAndEndDate() ">
							}
		                </div>
		            </td>
		        </tr>
		        <tr>
		            <th>
		                <!-- -->
		                <div class="dibBL vaM w154">
		                	<font class="cR">*</font>
		                   	@Messages("coupon.useConditions")
		                </div>
		            </th>
		            <td>
		                <div class="inputField">
		                	@textarea(couponForm("useConditions"), '_label -> None, '_help -> Messages("coupon.useConditionsMsg"), 'id -> "useConditions",
							'_error -> couponForm("useConditions").error.map(_.withMessage(Messages("coupon.useConditionsRequired"))))
		                </div>
		            </td>
		        </tr>
		        <tr>
		            <th>
		                <!-- -->
		                <div class="dibBL vaM w154">
		                	<font class="cR">*</font>
		                   	@Messages("coupon.presentTime")
		                </div>
		            </th>
		            <td>
		                <div class="inputField">
		                	@textarea(couponForm("presentTime"), '_label -> None, '_help -> Messages("coupon.presentTimeMsg"),'id -> "presentTime",
							'_error -> couponForm("presentTime").error.map(_.withMessage(Messages("coupon.presentTimeRequired"))))
		                </div>
		            </td>
		        </tr>
		        <tr>
		            <th>
		                <!-- -->
		                <div class="dibBL vaM w154">
		                	<font class="cR">*</font>
		                   	@Messages("coupon.description")
		                </div>
		            </th>
		            <td>
		                <div class="inputField">
		                	@textarea(couponForm("description"), '_label -> None, 'rows -> 3, 'cols -> 50, '_help -> Messages("coupon.couponDiscriptionMsg"),
	                        'id -> "description",
							'_error -> couponForm("description").error.map(_.withMessage(Messages("coupon.couponDiscriptionErr"))))
		                </div>
		            </td>
		        </tr>
		     </tbody>
		</table>
		
		<div class="btnArea">
	        <input type = "button" class = "buttons" value="@Messages("common.submit")" onclick="checksForCoupon();">
		            
		    <a href="@auth.routes.Salons.myCoupon"><input type = "button" class = "buttons" value="@Messages("common.backUp")"></a>
		</div>
	}
</div>

<script src="@routes.Assets.at("javascripts/checksForForms.js")" type="text/javascript"></script>